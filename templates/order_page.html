{% extends "base.html" %}
{% block title %}Order Page{% endblock %}

{% block content %}
<div class="container my-5" style="max-width:700px;">
    <div class="card shadow-lg border-0 rounded-4 p-4">
        {% if error %}
            <p class="text-danger fw-bold text-center">{{ error }}</p>
        {% else %}

        <!-- Order Summary -->
        <h2 class="fw-bold text-center text-coffee mb-4">ğŸ›’ Your Order</h2>
        <div class="d-flex flex-column flex-md-row align-items-center gap-4 mb-4 p-3 rounded-4 bg-light">
            {% if item.image %}
                <img src="{{ item.image.url }}" alt="{{ item.name }}" 
                     class="rounded-4 shadow-sm" style="width:160px; height:160px; object-fit:cover;">
            {% else %}
                <img src="https://via.placeholder.com/160x160?text={{ item.name }}" 
                     class="rounded-4 shadow-sm">
            {% endif %}
            <div>
                <h4 class="fw-bold">{{ item.name }}</h4>
                <p class="mb-1"><strong>Price:</strong> â‚¹{{ item.price }}</p>
                <p class="mb-1"><strong>Quantity:</strong> {{ qty }}</p>
                <p class="fw-bold text-success fs-5">Total: â‚¹{{ total }}</p>
            </div>
        </div>

        <!-- Payment Section -->
        <form method="post" action="{% url 'order_confirm' %}" class="d-flex flex-column gap-3">
            {% csrf_token %}
            <input type="hidden" name="item_id" value="{{ item.id }}">
            <input type="hidden" name="qty" value="{{ qty }}">

            <label class="fw-bold">ğŸ’³ Select Payment Method</label>
            <select name="payment_method" class="form-select py-2 px-3 rounded-3 border-coffee">
                <option value="cod">ğŸ’µ Cash on Delivery</option>
                <option value="online">ğŸ’³ Online Payment</option>
            </select>

            <!-- Payment Icons -->
            <div class="d-flex gap-4 justify-content-center mt-3 fs-2">
                <span title="Cash">ğŸ’µ</span>
                <span title="Card">ğŸ’³</span>
                <span title="UPI / Wallet">ğŸ“±</span>
            </div>

            <!-- Confirm Button -->
            <button type="submit" 
                class="btn btn-lg btn-coffee fw-bold mt-4 shadow-sm w-100">
                âœ… Confirm Order
            </button>
        </form>

        <!-- Back to Menu -->
        <div class="text-center mt-4">
            <a href="{% url 'menu' %}" class="btn btn-outline-coffee px-4">â¬…ï¸ Back to Menu</a>
        </div>

        {% endif %}
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<style>
:root {
    --coffee-dark: #4B2E2B;
    --coffee-medium: #7B4F45;
    --coffee-light: #ff6f61;
}
.text-coffee { color: var(--coffee-dark); }

.btn-coffee {
    background: var(--coffee-light);
    color: #fff;
    border-radius: 12px;
    transition: 0.3s;
}
.btn-coffee:hover {
    background: #e65348;
    transform: translateY(-2px);
}

.btn-outline-coffee {
    border: 2px solid var(--coffee-dark);
    color: var(--coffee-dark);
    border-radius: 10px;
    transition: 0.3s;
}
.btn-outline-coffee:hover {
    background: var(--coffee-dark);
    color: #fff;
}

.border-coffee {
    border: 2px solid var(--coffee-light);
}
</style>
{% endblock %}
